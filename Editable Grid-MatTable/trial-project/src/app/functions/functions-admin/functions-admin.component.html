<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<div class="main-content">
    <div class="header">
        <div class="title">
            <h1 i18n>Library Management</h1>
        </div>
        <div class="user-info">
            <div class="greeting">
                <h5><span i18n>Hi</span> {{username}}!</h5>
            </div>
            <div class="logout">
                <a i18n (click)="logout()">Logout</a>
            </div>
        </div>
        <!-- <div class="buttons">
          <button i18n (click)="getBooks()">Get Books </button>
          <button i18n (click)="getBookById()">Get Book By Id</button>
          <button i18n (click)="getBookByName()">Get Book By Name</button>
          <button i18n (click)="getBooksInPages()">Get Books In Pages</button>
          <button i18n (click)="onAddBook()">Add Book </button>
          <button i18n (click)="bulkUpload()">Bulk Upload</button>
          <button i18n (click)="updateBook()">Update Book</button>
          <button i18n (click)="deleteBook()">Delete Book</button>
      </div>
      <div class="buttons-users">
          <button i18n (click)="getUsers()">Get Users </button>
          <button i18n (click)="getUserById()">Get User By Id</button>
          <button i18n (click)="getUserByUsername()">Get User By Username</button>
          <button i18n (click)="deleteUser()">Delete User</button>
          <button i18n (click)="getBorrowList()">Get Borrow List </button>
          
      </div> -->
</div>
<div class="mat-elevation-z8">
    <table mat-table [dataSource]="dataSource" matSort>
  
    
      <ng-container matColumnDef="bookId">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>ID</th>
        <td mat-cell *matCellDef="let element">{{element.bookId}}</td>
      </ng-container>
  
    
      <ng-container matColumnDef="bookName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Book Name</th>
        <td mat-cell *matCellDef="let element">
          <mat-form-field>
            <input matInput [(ngModel)]="element.bookName" />
          </mat-form-field>
        </td>
      </ng-container>
  
    
      <ng-container matColumnDef="bookAuthor">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Book Author</th>
        <td mat-cell *matCellDef="let element">
          <mat-form-field>
            <input matInput [(ngModel)]="element.bookAuthor" />
          </mat-form-field>
        </td>
      </ng-container>
  
     
      <ng-container matColumnDef="noOfBook">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Number of Books</th>
        <td mat-cell *matCellDef="let element">
          <mat-form-field>
            <input matInput type="number" [(ngModel)]="element.noOfBook" />
          </mat-form-field>
        </td>
      </ng-container>
  
      
      <ng-container matColumnDef="price">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Price</th>
        <td mat-cell *matCellDef="let element">
          <mat-form-field>
            <input matInput type="number" [(ngModel)]="element.price" />
          </mat-form-field>
        </td>
      </ng-container>      
      <ng-container matColumnDef="bookImage">
        <th mat-header-cell *matHeaderCellDef>Book Image</th>
        <td mat-cell *matCellDef="let element">
            <img 
              *ngIf="element.bookImage" 
              [src]="'data:image/png;base64,' + element.bookImage" 
              alt="{{ element.bookName }}" 
              style="width: 100px; height: 100px;"
              (click)="fileInput.click()">
            <input 
              type="file"  
              id="image"
              name="image"
              style="display: none;" 
              (change)="onFileSelected($event, element)" 
              #fileInput
            />
          </ng-container>
      
          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>Actions</th>
            <td mat-cell *matCellDef="let element">
              <button mat-icon-button (click)="saveChanges(element)">
                <mat-icon>save</mat-icon>
              </button>
              <button mat-icon-button (click)="deleteBook(element.bookId)">
                <mat-icon>delete</mat-icon>
              </button>
            </td>
          </ng-container>
          
          
      
  
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  
    <mat-paginator [pageSize]="pageSize" [pageSizeOptions]="[5, 10, 20, 50, 100]"></mat-paginator>
  </div>
</div>
<!-- <app-user-input  *ngIf="isFunction === 'Add'" [buttonName]="buttonName" [isFunction]="isFunction"/> 
<app-user-input  *ngIf="isFunction === 'Update'" [buttonName]="buttonName" [isFunction]="isFunction"/> 
<app-user-id *ngIf="isFunction === 'GetBookById'" [buttonName]="buttonName" [isFunction]="isFunction"/>
<app-user-id *ngIf="isFunction === 'GetBookByName'" [buttonName]="buttonName" [isFunction]="isFunction"/>
<app-user-id *ngIf="isFunction === 'Delete'" [buttonName]="buttonName" [isFunction]="isFunction"/>
<app-user-pages *ngIf="isFunction==='GetInPages'"/>
<app-user-file *ngIf="isFunction==='BulkUpload'"/>
<div class="books">
    <app-user-table *ngIf="isFunction==='GetBooks'" [getJsonValue]="getJsonValue"/>
</div>
<app-get-users *ngIf="isFunction==='GetUsers'" [getJsonValue]="getJsonValue"/>
<app-get-user *ngIf="isFunction === 'GetUserById'" [buttonName]="buttonName" [isFunction]="isFunction"/>
<app-get-user *ngIf="isFunction === 'GetUserByUsername'" [buttonName]="buttonName" [isFunction]="isFunction"/>
<app-get-user *ngIf="isFunction === 'DeleteUser'" [buttonName]="buttonName" [isFunction]="isFunction"/>
<app-borrowlist *ngIf="isFunction==='GetBorrowList'" [getJsonValue]="getJsonValue"/>
<app-message *ngIf="message!=null" [message]=message/> -->